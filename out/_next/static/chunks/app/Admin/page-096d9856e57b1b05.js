(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{4775:(e,a,r)=>{Promise.resolve().then(r.bind(r,7385))},5569:(e,a,r)=>{"use strict";r.d(a,{Bj:()=>n,_h:()=>t,az:()=>l,d$:()=>i});var s=r(9632);async function t(e){let{email:a,name:r,password:t,login:l}=e;await s.z.user.create({data:{email:a,name:r,password:t,Login:l}})}async function l(e){let{login:a,password:r}=e,t=await s.z.user.findFirst({where:{Login:a,password:r}});if(!t)throw Error("Invalid login or password");return{login:t.Login,name:t.name,isAdmin:t.isAdmin,userId:t.id}}async function n(e,a,r){return await s.z.product.create({data:{name:e,description:a,price:r}})}async function i(){return await s.z.product.findMany()}},7385:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>n});var s=r(5155),t=r(5569),l=r(2115);function n(){let[e,a]=(0,l.useState)({name:"",description:"",price:""}),[r,n]=(0,l.useState)([]),[i,d]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,t.d$)();n(e)}catch(e){d("Failed to fetch products"+e)}})()},[]);let c=r=>{let{name:s,value:t}=r.target;a({...e,[s]:t})},o=async s=>{s.preventDefault(),d(null);let l=parseFloat(e.price);if(isNaN(l)){d("Price must be a valid number");return}try{let s=await (0,t.Bj)(e.name,e.description,l);n([...r,s]),a({name:"",description:"",price:""})}catch(e){d("Failed to add product"+e)}};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Admin Page"}),(0,s.jsx)("h1",{className:"text-xl font-semibold mb-2",children:"Add New Product"}),i&&(0,s.jsx)("p",{className:"text-red-500",children:i}),(0,s.jsxs)("form",{onSubmit:o,className:"mb-4 bg-white p-4 rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"block text-gray-700",children:"Name"}),(0,s.jsx)("input",{type:"text",name:"name",value:e.name,onChange:c,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Name...",required:!0})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"block text-gray-700",children:"Description"}),(0,s.jsx)("textarea",{name:"description",value:e.description,onChange:c,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Description...",required:!0})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"block text-gray-700",children:"Price"}),(0,s.jsx)("input",{type:"number",name:"price",value:e.price,onChange:c,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Price...",required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Product"})]}),(0,s.jsx)("h1",{className:"text-xl font-semibold mb-2",children:"Products"}),(0,s.jsx)("ul",{className:"space-y-4",children:r.map(e=>(0,s.jsxs)("li",{className:"bg-white border border-black p-4 rounded-lg shadow",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold",children:e.name}),(0,s.jsx)("p",{className:"text-gray-700",children:e.description}),(0,s.jsxs)("p",{className:"text-gray-900 font-bold",children:[e.price," zÅ‚"]}),(0,s.jsx)("button",{className:"mt-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]},e.id))})]})}},9632:(e,a,r)=>{"use strict";r.d(a,{z:()=>t});var s=r(1094);let t=r.g.prisma||new s.PrismaClient}},e=>{var a=a=>e(e.s=a);e.O(0,[94,441,517,358],()=>a(4775)),_N_E=e.O()}]);