(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6289:(t,r,e)=>{Promise.resolve().then(e.bind(e,8438))},3411:(t,r,e)=>{"use strict";e.d(r,{dT:()=>i,pj:()=>a,zY:()=>n});var o=e(9632);async function a(t){let{userId:r,productId:e,quantity:a}=t;try{if(!await o.A.user.findUnique({where:{id:r}}))throw Error("User not found");if(!await o.A.product.findUnique({where:{id:e}}))throw Error("Product not found");let t=await o.A.cart.findUnique({where:{userId:r}});t||(t=await o.A.cart.create({data:{userId:r}}));let n=await o.A.cartItem.findFirst({where:{cartId:t.id,productId:e}});n?await o.A.cartItem.update({where:{id:n.id},data:{quantity:n.quantity+a}}):await o.A.cartItem.create({data:{cartId:t.id,productId:e,quantity:a}})}catch(t){throw console.error("Error adding to cart:",t),Error("Failed to add to cart")}}async function n(t,r){try{if(console.log("RemoveFromCart called with userId:",t,"and productId:",r),!await o.A.product.findUnique({where:{id:r}}))throw Error("Product not found");let e=await o.A.cart.findUnique({where:{userId:t}});if(!e)throw Error("Cart not found");await o.A.cartItem.deleteMany({where:{cartId:e.id,productId:r}}),console.log("Product removed successfully from cart")}catch(t){throw console.error("Error removing from cart:",t),Error("Failed to remove from cart")}}async function i(t){return(await o.A.cartItem.findMany({where:{cart:{userId:t}},include:{product:!0}})).map(t=>({id:t.id,productId:t.productId,quantity:t.quantity,price:t.product.price,product:{name:t.product.name}}))}},7582:(t,r,e)=>{"use strict";function o(t){try{localStorage.setItem("session",JSON.stringify(t))}catch(t){console.error("Error setting session:",t)}}function a(){try{let t=localStorage.getItem("session");return t?JSON.parse(t):null}catch(t){console.error("Error getting session:",t)}return null}function n(){try{localStorage.removeItem("session")}catch(t){console.error("Error clearing session:",t)}}e.d(r,{Ht:()=>a,Nq:()=>o,q7:()=>n})},8438:(t,r,e)=>{"use strict";e.d(r,{default:()=>d});var o=e(5155),a=e(8173),n=e.n(a),i=e(3411),c=e(7582);let d=function(t){let{title:r,description:e,id:a,price:d}=t,s=async()=>{let t=await (0,c.Ht)();if(!t){alert("Please log in to add items to the cart.");return}let r=t.UserId;try{await (0,i.pj)({userId:r,productId:a,quantity:1})}catch(t){console.error("Error adding to cart:",t)}};return(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md m-4 hover:shadow-lg transition-shadow duration-300 w-[200px]",children:[(0,o.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:r}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:e}),(0,o.jsx)("p",{className:"text-lg font-bold text-gray-800 mb-4",children:d?"".concat(d.toFixed(2)," zÅ‚"):"Price not available"}),(0,o.jsx)(n(),{href:"/Pages/Posts/".concat(a),children:(0,o.jsx)("p",{className:"text-blue-500 hover:underline mb-4 block",children:"Read more about !"})}),(0,o.jsx)("button",{onClick:s,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-300",children:"Add to Cart"})]})}},9632:(t,r,e)=>{"use strict";throw e.d(r,{A:()=>__WEBPACK_DEFAULT_EXPORT__}),Error("PrismaClient is unable to run in the browser.")}},t=>{var r=r=>t(t.s=r);t.O(0,[173,441,517,358],()=>r(6289)),_N_E=t.O()}]);